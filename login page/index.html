<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My bag</title>
    <link rel="stylesheet" href="A1style.css">
    <!-- bootstrap link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity=
    "sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <div class="cointainer">
        <section id="home-page">
                
           
                <div id="new">
                    <!-- bag image -->
                <img src="img/mybagshop-white.png" class="img-fluid my-5 align-center a2img2"  style="width: 20%;">
                <form action="/addCart/addCart.html" method="POST" class="mx-auto">
                    
                      <label for="Username" class="form-label my-2 mx-4">Username</label>
                      <input type="text" class="form-control" id="Username">
                     
                   <label for="Password" class="form-label my-2 mx-4">Password</label>
                      <input type="password" class="form-control" id="Password" >
                      <button class="a1btn1 my-3">Sign in</button>
                      <p class="a1text1 mx-2">New to MyBag.shop?<a href=""  style="text-decoration: none;">Register</a></p>
                      </form>
                    </div>
                    
        </section>
    </div>

    <script>
			const form = document.getElementById('login')
			form.addEventListener('submit', login)

			async function login(event) {
				event.preventDefault()
				const username = document.getElementById('username').value
				const password = document.getElementById('password').value

				const result = await fetch('/api/login', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({
						username,
						password
					})
				}).then((res) => res.json())

				if (result.status === 'ok') {
					// everythign went fine
					console.log('Got the token: ', result.data)
					localStorage.setItem('token', result.data)
					alert('Success')
				} else {
					alert(result.error)
				}
			}
		</script>
        
</body>
</html>